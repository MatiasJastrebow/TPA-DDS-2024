@startuml
'========================================== Clases de la entrega 1 ============================================='

class Heladera {
    -direccion: Direccion;
    -nombre: String;
    -capacidadMaximaViandas: Integer;
    -List<Vianda> viandas;
    -fechaDeCreacion: LocalDate;
    -ultVezActivada: LocalDate;
    -modelo: Modelo;
    -sensorMovimiento: SensorMovimiento;
    -mesesActiva: Integer;
    -estaActiva: Boolean;

    +void agregarVianda(Vianda vianda)
    +Integer calcularMesesActiva()
}

class Direccion {
    -ubicacion: String
    -longitud: Float
    -latitud: Float
    -provincia: Provincia
}

class Provincia {
    -nombreProvincia: String
    -ciudad: Ciudad
}

class Ciudad {
    -nombreCiudad: String
    -barrio: Barrio
}

class Barrio {
    -nombreBarrio: String
    -calle: String
    -numero: Integer
}

class Vianda {
    -comida: Comida
    -fechaDonacion: LocalDate
    -colaborador: Colaborador
    -heladera: Heladera
    -calorias: Integer
    -peso: Float
    -entregada: Boolean
}

class Comida {
    -nombre: String
    -vencimiento: LocalDate
}

class Vulnerable {
    -nombre: String
    -fechaNacimiento: LocalDate
    -fechaRegistro: LocalDate
    -domicilio: Direccion
    -documento: Documento
    -Set<Vulnerable> menoresAcargo
    -tarjeta: Tarjeta

    +boolean puedeUsarTarjeta(Heladera heladera)
}

class Colaborador{
    'De Persona Fisica'
    -nombre: String
    -apellido: String
    -documento: Documento

    'De Persona Juridica'
    -razonSocial: String
    -tipo: String
    -rubro: String
    -direccion: Direccion

    -contacto: Contacto
    -tipoColaborador: TipoColaborador
    -respuestaFormulario: RespuestaFormulario
    -reconocimiento: Reconocimiento

    +boolean puedeCanjear(Oferta oferta)
    +void aumentarReconocimiento(Colaboracion colaboracion)
}

enum TipoColaborador {
    FISICO,
    JURIDICO,
    EMPRESA_ASOCIADA
}

class Formulario {
    -List<Pregunta> preguntas
}

class RespuestaFormulario {
    -nombre: String
    -descripcion: String
    -List<Respuesta> respuestas
    -formulario: Formulario
}

class Pregunta {
    -pregunta: String
    -esOpcional: Boolean
    -Set<Opcion> opciones
    -tipoDeSuRespuesta: TipoPregunta
}

class Respuesta {
    -pregunta: Pregunta
    -tipoRespuesta: TipoPregunta
    -respuestaTextoLibre: String
    -Set<Opcion> respuestaMultipleChoice
    -respuestaSingleChoice: Opcion
}

class Opcion {
    -opcion: String
}

enum TipoPregunta {
    MULTIPLE_CHOICE,
    SINGLE_CHOICE,
    TEXTO_LIBRE
}

class Colaboracion {
    -tipoColaboracion: TipoColaboracion

    'DONAR_DINERO'
    -fechaDonacionDinero: LocalDate
    -monto: Integer
    -frecuencia: String

    'DONAR_VIANDA'
    -List<Vianda> viandas

    'DISTRIBUIR_VIANDA'
    -heladeraOrigen: Heladera
    -heladeraDestino: Heladera
    -cantViandas: Integer
    -motivoDistribucion: String
    -fechaDistribucion: Date

    'COLOCAR_HELADERA'
    -heladera: Heladera

    'DISTRIBUIR_TARJETAS'
    -Set<Tarjeta> tarjetasEntregadas

    'REALIZAR_OFERTAS'
    -List<Oferta> ofertas

}

enum TipoColaboracion {
    DONAR_DINERO,
    DONAR_VIANDA,
    DISTRIBUIR_VIANDA,
    COLOCAR_HELADERA,
    DISTRIBUIR_TARJETAS,
    REALIZAR_OFERTAS
}

'========================================== Clases de la entrega 2 ============================================='

class Modelo{
    -modelo: String
    -sensorTemperatura: SensorTemperatura
}

class SensorTemperatura {
    -heladera: Heladera
    -temperaturaMinima: Float
    -temperaturaMaxima: Float
    -ultimaTemperatura: Float

    +void activarSensor()
    +void desactivarSensor()
}

class SensorMovimiento {
    -heladera: Heladera

    +void activarSensor()
    +void desactivarSensor()
}

class Reconocimiento {
    -puntosPorColaborar: Float
    -formulaCalculoDePuntos: Formula

    +void sumarPuntos(Colaboracion colaboracion)
    +void restarPuntos(Float puntos)
}

class Formula {
    -coefPesosDonados: Float
    -coefViandasDonadas: Float
    -coefViandasDistribuidas: Float
    -coefTarjetasRepartidas: Float
    -coefHeladerasActivas: Float
    -mapCalculos: EnumMap<TipoColaboracion, Function<Colaboracion, Float>>;

    +Float calcularPuntosDe(Colaboracion colaboracion)
}

class Tarjeta {
    -codigo: String
    -cantidadDeUsosMaxima: Integer
    -HashSet<RegistroUso> registroUsos
    -informacionRegistro: InformacionRegistro

    +boolean puedeUtilizarse(Heladera heladera)
}

class RegistroUso {
    -fechaUtilizacion: LocalDate
    -heladera: Heladera
}

class InformacionRegistro {
    -colaborador: Colaborador
    -vulnerable: Vulnerable
}

class Tecnico {
    -nombre: String
    -apellido: String
    -documento: Documento
    -cuil: Integer
    -contacto: Contacto
    -areaDeCobertura: Ciudad
}

enum TipoDocumento {
    DNI,
    LIBRETA_ENROLAMIENTO,
    PASAPORTE
}

class Oferta {
    -nombre: String
    -puntosNecesarios: Float
    -imagenIlustrativa: Image
}

class Documento {
    -nroDocumento: Integer
    -tipoDocumento: TipoDocumento
}

class Contacto {
    -contacto: String
    -tipoContacto: TipoContacto
}

enum TipoContacto {
    TELEFONO_FIJO,
    CELULAR,
    MAIL
}
'================================================== Relaciones ================================================'

Heladera o--"*" Vianda
Vianda --> Heladera
Colaboracion --> TipoColaboracion
Colaboracion --->"*" Vianda
Colaboracion -> Heladera
Vulnerable ->"*" Vulnerable
Heladera o-- Direccion
Colaborador o--- Direccion
Vianda o-- Comida
Vianda o- Colaborador
Formulario o--"*" Pregunta
RespuestaFormulario o--"*" Respuesta
RespuestaFormulario o-- Formulario
Colaborador o--- RespuestaFormulario
Respuesta -->"*" Opcion
Respuesta o-- Pregunta
Pregunta ->"*" Opcion
Pregunta *--> TipoPregunta
Respuesta o-- TipoPregunta
Direccion --> Provincia
Provincia --> Ciudad
Ciudad --> Barrio
Vulnerable o-- Direccion
Vulnerable o-- Documento
Tecnico o-- Documento
Vulnerable o-- Tarjeta
Tarjeta o--"*" RegistroUso
Tarjeta *-- InformacionRegistro
InformacionRegistro o-- Colaborador
InformacionRegistro o-- Vulnerable
Reconocimiento o-- Formula
Formula ..> Colaboracion
Heladera --> Modelo
Colaborador *--- TipoColaborador
Heladera o--> SensorMovimiento
Colaboracion -->"*" Tarjeta
Modelo o--> SensorTemperatura
Tarjeta ..> Heladera
Heladera o-- SensorTemperatura
Tecnico o-- Contacto
Contacto *-- TipoContacto
Documento *-- TipoDocumento
Tecnico --> Ciudad
RegistroUso --> Heladera
Colaborador o-- Reconocimiento
Reconocimiento ..> Colaboracion
Colaborador ..> Colaboracion
Colaborador --> Contacto
Colaboracion -->"*" Oferta
Colaborador --> Usuario
Colaborador --> Documento

@enduml