{{#partial "estilo"}}
    <link rel="stylesheet"  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <link rel="stylesheet"
          href= "https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity= "sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous">
    <link rel="stylesheet" href="/css/registrarse.css">
{{/partial}}

{{#partial "cuerpo"}}
    <div class="container mt-5">
        <h2>Registro</h2>
        <div class="d-flex justify-content-end mb-3">
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="personaToggle" >
                <label class="form-check-label" for="personaToggle">Persona Jurídica</label>
            </div>
        </div>

        <!-- Formulario Persona Jurídica -->
        <form id="form-juridica" class="d-none" method="POST" action="/heladeras-solidarias/registrarse">
            <input type="hidden" name="tipoColaborador" value="JURIDICO">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="nombreUsuarioJuridico" class="form-label">Nombre de Usuario *</label>
                    <input name="usuario" type="text" class="form-control" id="nombreUsuarioJuridico"
                           placeholder="Ingresar nombre de usuario" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="contraseniaJuridico" class="form-label">Contraseña *</label>
                    <input name="contrasenia" type="password" class="form-control" id="contraseniaJuridico"
                           placeholder="Ingresar contraseña" required>
                    <!--TODO METERLO ADENTRO DEL INPUT-->
                    <i class="bi bi-eye-slash" id="togglePassword"></i>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="razonSocial" class="form-label">Razón Social *</label>
                    <input name="razonSocial" type="text" class="form-control" id="razonSocial"
                           placeholder="Ingresar razón social" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="tipoOrganizacion" class="form-label">Tipo *</label>
                    <select name="tipoOrganizacion" class="form-select" id="tipoOrganizacion" required>
                        <option selected value="">Seleccione una Opción</option>
                        <option value="GUBERNAMENTAL">Gubernamental</option>
                        <option value="ONG">ONG</option>
                        <option value="EMPRESA">Empresa</option>
                        <option value="INSTITUCION">Institución</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="rubro" class="form-label">Rubro *</label>
                    <input name="rubro" type="text" class="form-control" id="rubro" placeholder="Ingresar rubro"
                           required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="tipoContactoJuridica" class="form-label">Tipo de Contacto *</label>
                    <select name="tipoContacto" class="form-select" id="tipoContactoJuridica" required>
                        <option selected value="">Seleccione una opción</option>
                        <option value="MAIL">Email</option>
                        <option value="TELEFONO">Teléfono</option>
                        <option value="TELEGRAM">Telegram</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="contactoJuridica" class="form-label">Contacto *</label>
                    <input name="contacto" type="text" class="form-control" id="contactoJuridica"
                           placeholder="ej: 1122334455" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="provinciaJuridica" class="form-label">Provincia</label>
                    <select name="provincia" class="form-select" id="provinciaJuridica">
                        <option value="" selected>Seleccione una provinicia</option>
                        {{#each provincias}}
                            <option value="{{this.getId}}">{{this.getNombreProvincia}}</option>
                        {{/each}}
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="ciudadJuridica" class="form-label">Ciudad</label>
                    <input name="ciudad" type="text" class="form-control" id="ciudadJuridica"
                           placeholder="ej: CABA">
                </div>
                <div class="col-md-6 mb-3">
                    <label for="barrioJuridica" class="form-label">Barrio</label>
                    <input name="barrio" type="text" class="form-control" id="barrioJuridica"
                           placeholder="ej: Villa Crespo">
                </div>
            </div><div class="row">
            <div class="col-md-6 mb-3">
                <label for="calleJuridica" class="form-label">Calle</label>
                <input name="calle" type="text" class="form-control" id="calleJuridica"
                       placeholder="ej: Malabia">
            </div>
            <div class="col-md-6 mb-3">
                <label for="numeroJuridico" class="form-label">Numero</label>
                <input name="numero" type="text" class="form-control" id="numeroJuridico"
                       placeholder="ej: 500">
            </div>
        </div>
            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-primary">Registrar</button>
            </div>
        </form>

        <!-- Formulario Persona Física -->
        <form id="form-fisica" method="POST" action="/heladeras-solidarias/registrarse">
            <input type="hidden" name="tipoColaborador" value="FISICO" >
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="nombreUsuarioFisico" class="form-label">Nombre de Usuario *</label>
                    <input name="usuario" type="text" class="form-control" id="nombreUsuarioFisico"
                           placeholder="Ingresar nombre de usuario" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="contraseniaFisico" class="form-label">Contraseña *</label>
                    <input name="contrasenia" type="password" class="form-control" id="contraseniaFisico"
                           placeholder="Ingresar contraseña" required>
                    <i class="bi bi-eye-slash" id="togglePassword"></i>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="nombreFisica" class="form-label">Nombre *</label>
                    <input name="nombre" type="text" class="form-control" id="nombreFisica"
                           placeholder="Ingresar nombre" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="apellidoFisica" class="form-label">Apellido *</label>
                    <input name="apellido" type="text" class="form-control" id="apellidoFisica"
                           placeholder="Ingresar apellido" required>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="tipoDocumentoFisica" class="form-label">Tipo de Documento *</label>
                    <select name="tipoDocumento" class="form-select" id="tipoDocumentoFisica" required>
                        <option value="DNI">DNI</option>
                        <option value="LC">LC</option>
                        <option value="LE">LE</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="numeroDocumentoFisica" class="form-label">Nro de Documento *</label>
                    <input name="numeroDocumento" type="text" class="form-control" id="numeroDocumentoFisica"
                           placeholder="Ingrese sin puntos ni espacios" required>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="tipoContactoFisica" class="form-label">Tipo de Contacto *</label>
                    <select name="tipoContacto" class="form-select" id="tipoContactoFisica" required>
                        <option selected value="">Seleccione una Opción</option>
                        <option value="MAIL">Mail</option>
                        <option value="WHATSAPP">WhatsApp</option>
                        <option value="TELEGRAM">Telegram</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="contactoFisica" class="form-label">Contacto *</label>
                    <input name="contacto" type="text" class="form-control" id="contactoFisica"
                           placeholder="ej: 1122334455 o example@ghost.com" required>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="provinciaFisica" class="form-label">Provincia</label>
                    <select name="provincia" class="form-select" id="provinciaFisica">
                        <option selected value="">Seleccione una Opción</option>
                        {{#each provincias}}
                            <option value="{{this.getId}}">{{this.getNombreProvincia}}</option>
                        {{/each}}
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="ciudadFisica" class="form-label">Ciudad</label>
                    <input name="ciudad" type="text" class="form-control" id="ciudadFisica"
                           placeholder="ej: CABA">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="barrioFisica" class="form-label">Barrio</label>
                    <input name="barrio" type="text" class="form-control" id="barrioFisica"
                           placeholder="ej: Villa Crespo">
                </div>
                <div class="col-md-6 mb-3">
                    <label for="calleFisica" class="form-label">Calle</label>
                    <input name="calle" type="text" class="form-control" id="calleFisica"
                           placeholder="ej: Malabia">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <!--Columna vacia para que quede ordenado-->
                </div>
                <div class="col-md-6 mb-3">
                    <label for="numeroFisico" class="form-label">Numero</label>
                    <input name="numero" type="text" class="form-control" id="numeroFisico"
                           placeholder="ej: 411">
                </div>
            </div>
            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-primary btn-lg">Registrar</button>
            </div>
        </form>
    </div>
{{/partial}}

{{#partial "scripts"}}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-g2Q2bAmzqopHLmj10EIXSL94up6E4Z0+8+2M+JTXtyizfG34z2qa60mu8GxVd+hg"
            crossorigin="anonymous"></script>
    <script>
        document.getElementById('personaToggle').addEventListener('change', function () {
            let juridicaForm = document.getElementById('form-juridica');
            let fisicaForm = document.getElementById('form-fisica');
            if (this.checked) {
                juridicaForm.classList.remove('d-none');
                fisicaForm.classList.add('d-none');
            } else {
                juridicaForm.classList.add('d-none');
                fisicaForm.classList.remove('d-none');
            }
        });
    </script>

    <script>
        // Seleccionamos el campo obligatorio y el resto de campos opcionales
        const opcion1 = document.getElementById('provincia');
        const opcion2 = document.getElementById('ciudad');
        const opcion3 = document.getElementById('barrio');
        const opcion4 = document.getElementById('calle');
        const opcion5 = document.getElementById('numero');

        // Agregamos un evento para cuando se cambia el valor del campo obligatorio
        opcion1.addEventListener('input', function() {
            if (opcion1.value.trim() !== '') {
                // Si el campo obligatorio tiene valor, los demás campos opcionales se vuelven obligatorios
                opcion2.required = true;
                opcion3.required = true;
                opcion4.required = true;
                opcion5.required = true;
            } else {
                // Si el campo obligatorio está vacío, los otros vuelven a ser opcionales
                opcion2.required = false;
                opcion3.required = false;
                opcion4.required = false;
                opcion5.required = false;
            }
        });
    </script>

    <script>
        const togglePassword = document
                .querySelector('#togglePassword');
        const password = document.querySelector('#password');
        togglePassword.addEventListener('click', () => {
            const type = password
                    .getAttribute('type') === 'password' ?
                    'text' : 'password';
            password.setAttribute('type', type);+
            this.classList.toggle('bi-eye');
        });
    </script>
{{/partial}}

{{> templates/base }}